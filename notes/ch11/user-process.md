---
title: 用户进程
date: 2022-11-08
updated: 2022-11-08
tags: 
categories: 
comments: true
---









## 2022.11.8

### bug

切换用户进程后，无法再切换回内核线程。一旦用户进程结束，也找不到正确的返回地址。

## resolve

其实我发现了中断似乎被关闭了，但一直以为是别的地方写的有问题。最后，查找发现切换用户进程后时钟中断一直没有起作用（if 为 0，ticks值一直没变）。然后，查看进程创建的 pcb 块中 eflags 的 if 标志位是否为 1 ，果然写成了 0，原因是将 IF 为 1 的宏和为 0 的宏写反了。

所以，创建进程 pcb 时，记得将 eflags 的 if 标志位置为 1，表示打开中断即可。





















## Reference 

1. 
